{"ast":null,"code":"import axios from 'axios';\nexport default {\n  inject: [\"reload\"],\n  name: 'admin-staff',\n  data() {\n    return {\n      dialogTableVisible: false,\n      dialogFormVisible: false,\n      // 详情表单\n      dialogVisible: false,\n      // 删除对话框\n      formLabelWidth: '120px',\n      pageSize: 10,\n      // 每页显示10条\n      totalCount: 100,\n      // 总记录数初始化为100\n      currentPage: 1,\n      // 当前页码\n      tableData: [],\n      // 接收返回的数据\n      form: {\n        // 用来显示详情数据和更新数据\n        Avatar: \"\",\n        userName: \"\",\n        passWord: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        telephone: \"\",\n        email: \"\"\n      },\n      searchStaff: {\n        // 接收输入的username\n        username: \"\"\n      },\n      staff: {\n        image: \"\"\n      }\n    };\n  },\n  created() {\n    // 页面挂载完毕，请求全部数据\n    let that = this;\n    axios.get(\"http://localhost:8080/admin/staff\").then(function (resp) {\n      if (resp.data.code === 1) {\n        that.tableData = resp.data.data;\n      } else {\n        alert(resp.data.msg);\n      }\n    });\n  },\n  methods: {\n    selectByuserName(userName) {\n      let that = this;\n      axios.get(\"http://localhost:8080/admin/staff/\" + userName).then(function (resp) {\n        if (resp.data.code === 1) {\n          that.tableData = resp.data.data;\n        } else {\n          alert(resp.data.msg);\n        }\n      });\n    },\n    deleteByuserName(userName) {\n      this.dialogVisible = false;\n      let that = this;\n      axios.delete(\"http://localhost:8080/admin/staff/\" + userName).then(function (resp) {\n        if (resp.data.code === 1) {\n          that.tableData = resp.data.data;\n          that.reload();\n        } else {\n          alert(resp.data.msg);\n        }\n        // console.log(userName);\n        // that.tableData = resp.data;\n        // that.reload();\n      });\n    },\n\n    clear() {\n      this.searchStaff.username = '';\n    },\n    handleEdit(index, row) {\n      this.dialogFormVisible = true;\n      this.form.Avatar = row.avatar;\n      this.form.firstName = row.firstname;\n      this.form.lastName = row.lastname;\n      this.form.userName = row.username;\n      this.form.passWord = row.password;\n      this.form.email = row.email;\n      this.form.telephone = row.telephone;\n    }\n    // handleSet (index, row) {\n    //     var params = {\n    //         Avatar: this.form.Avatar,\n    //         userName: this.form.userName,\n    //         passWord: this.form.passWord,\n    //         firstName: this.form.firstName,\n    //         lastName: this.form.lastName,\n    //         telephone: this.form.telephone,\n    //         email: this.form.email\n    //     }\n\n    // }\n  }\n};","map":{"version":3,"names":["axios","inject","name","data","dialogTableVisible","dialogFormVisible","dialogVisible","formLabelWidth","pageSize","totalCount","currentPage","tableData","form","Avatar","userName","passWord","firstName","lastName","telephone","email","searchStaff","username","staff","image","created","that","get","then","resp","code","alert","msg","methods","selectByuserName","deleteByuserName","delete","reload","clear","handleEdit","index","row","avatar","firstname","lastname","password"],"sources":["src/views/AdminStaff.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-container>\r\n            <!-- <el-header>\r\n                导航栏\r\n            </el-header> -->\r\n            <el-main>\r\n                <!--搜索表单-->\r\n                <el-form :inline=\"true\" :model=\"searchStaff.username\">\r\n                    <el-form-item label=\"username\">\r\n                        <el-input v-model=\"searchStaff.username\" placeholder=\"Please input the username\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"selectByuserName(searchStaff.username)\">Search</el-button>\r\n                        <el-button type=\"info\" @click=\"clear\">Clear</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n\r\n                <br>\r\n\r\n                <!--表格-->\r\n                <template>\r\n                    <el-table :data=\"tableData\" style=\"width: 100%\" border>\r\n                        <el-table-column prop=\"image\" label=\"Avatar\" align=\"center\">\r\n                            <template slot-scope=\"{ row }\">\r\n                                <el-image style=\"width: auto; height: 40px; border: none; cursor: pointer\"\r\n                                    :src=\"row.image\"></el-image>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"firstname\" label=\"FirstName\" align=\"center\"></el-table-column>\r\n                        <el-table-column prop=\"lastname\" label=\"LastName\" align=\"center\"></el-table-column>\r\n                        <!-- <el-table-column  label=\"FullName\" align=\"center\">{{ scope.row.firstName }} + {{ scope.row.lastName }}</el-table-column> -->\r\n\r\n\r\n                        <el-table-column align=\"center\" label=\"Operation\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\">Look\r\n                                    More</el-button>\r\n                                <el-dialog title=\"Detailed Information\" :visible.sync=\"dialogFormVisible\">\r\n                                    <el-form :model=\"form\">\r\n                                        <el-form-item label=\"Avatar\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.Avatar\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"firstName\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.firstName\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"lastName\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.lastName\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"userName\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.userName\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"password\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.passWord\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"telephone\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.telephone\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"email\" :label-width=\"formLabelWidth\">\r\n                                            <el-input v-model=\"form.email\" auto-complete=\"off\"></el-input>\r\n                                        </el-form-item>\r\n\r\n                                    </el-form>\r\n                                    <div slot=\"footer\" class=\"dialog-footer\">\r\n                                        <el-button @click=\"dialogFormVisible = false\">Quit</el-button>\r\n                                        <el-button type=\"primary\"\r\n                                            @click=\"handleSet(scope.$index, scope.row)\">Save</el-button>\r\n                                    </div>\r\n                                </el-dialog>\r\n                                <el-button type=\"danger\" size=\"small\"\r\n                                    @click=\"dialogVisible = true\">Delete</el-button>\r\n                                <el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\r\n                                    <span>Do you confirm to delete this staff?</span>\r\n                                    <span slot=\"footer\" class=\"dialog-footer\">\r\n                                        <el-button @click=\"dialogVisible = false\">Quit</el-button>\r\n                                        <el-button type=\"primary\" @click=\"deleteByuserName(scope.row.username)\" >Confirm</el-button>\r\n                                    </span>\r\n                                </el-dialog>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </template>\r\n\r\n                <!--分页工具条-->\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                    :background=\"background\" :current-page=\"currentPage\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"10\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalCount\">\r\n                </el-pagination>\r\n\r\n            </el-main>\r\n\r\n        </el-container>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    inject: [\"reload\"],\r\n    name: 'admin-staff',\r\n    data() {\r\n        return {\r\n            dialogTableVisible: false,\r\n            dialogFormVisible: false, // 详情表单\r\n            dialogVisible: false,   // 删除对话框\r\n            formLabelWidth: '120px',\r\n            pageSize: 10, // 每页显示10条\r\n            totalCount: 100, // 总记录数初始化为100\r\n            currentPage: 1, // 当前页码\r\n            tableData: [], // 接收返回的数据\r\n            form: { // 用来显示详情数据和更新数据\r\n                Avatar: \"\",\r\n                userName: \"\",\r\n                passWord: \"\",\r\n                firstName: \"\",\r\n                lastName: \"\",\r\n                telephone: \"\",\r\n                email: \"\"\r\n            },\r\n            searchStaff: { // 接收输入的username\r\n                username: \"\"\r\n            },\r\n            staff: {\r\n                image: \"\"\r\n            }\r\n        }\r\n    },\r\n    created() { // 页面挂载完毕，请求全部数据\r\n        let that = this;\r\n        axios.get(\"http://localhost:8080/admin/staff\")\r\n            .then(function (resp) {\r\n                if(resp.data.code === 1){\r\n                    that.tableData = resp.data.data;\r\n                }else{\r\n                    alert(resp.data.msg);\r\n                }\r\n                \r\n            })\r\n    },\r\n    methods: {\r\n        selectByuserName(userName) {\r\n            let that = this;\r\n            axios.get(\"http://localhost:8080/admin/staff/\" + userName).then(function (resp) {\r\n                if(resp.data.code === 1){\r\n                    that.tableData = resp.data.data;\r\n                }else{\r\n                    alert(resp.data.msg);\r\n                }\r\n            })\r\n        },\r\n        deleteByuserName(userName) {\r\n            this.dialogVisible = false;\r\n            let that = this;\r\n            axios.delete(\"http://localhost:8080/admin/staff/\" + userName)\r\n                .then(function (resp) {\r\n                    if(resp.data.code === 1){\r\n                        that.tableData = resp.data.data;\r\n                        that.reload();\r\n                    }else{\r\n                        alert(resp.data.msg);\r\n                    }\r\n                    // console.log(userName);\r\n                    // that.tableData = resp.data;\r\n                    // that.reload();\r\n                })\r\n        },\r\n        clear() {\r\n            this.searchStaff.username = ''\r\n        },\r\n        handleEdit(index, row) {\r\n            this.dialogFormVisible = true\r\n            this.form.Avatar = row.avatar\r\n            this.form.firstName = row.firstname\r\n            this.form.lastName = row.lastname\r\n            this.form.userName = row.username\r\n            this.form.passWord = row.password\r\n            this.form.email = row.email\r\n            this.form.telephone = row.telephone\r\n        },\r\n        // handleSet (index, row) {\r\n        //     var params = {\r\n        //         Avatar: this.form.Avatar,\r\n        //         userName: this.form.userName,\r\n        //         passWord: this.form.passWord,\r\n        //         firstName: this.form.firstName,\r\n        //         lastName: this.form.lastName,\r\n        //         telephone: this.form.telephone,\r\n        //         email: this.form.email\r\n        //     }\r\n\r\n        // }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style></style>"],"mappings":"AAiGA,OAAAA,KAAA;AAEA;EACAC,MAAA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,kBAAA;MACAC,iBAAA;MAAA;MACAC,aAAA;MAAA;MACAC,cAAA;MACAC,QAAA;MAAA;MACAC,UAAA;MAAA;MACAC,WAAA;MAAA;MACAC,SAAA;MAAA;MACAC,IAAA;QAAA;QACAC,MAAA;QACAC,QAAA;QACAC,QAAA;QACAC,SAAA;QACAC,QAAA;QACAC,SAAA;QACAC,KAAA;MACA;MACAC,WAAA;QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAC,KAAA;MACA;IACA;EACA;EACAC,QAAA;IAAA;IACA,IAAAC,IAAA;IACAzB,KAAA,CAAA0B,GAAA,sCACAC,IAAA,WAAAC,IAAA;MACA,IAAAA,IAAA,CAAAzB,IAAA,CAAA0B,IAAA;QACAJ,IAAA,CAAAd,SAAA,GAAAiB,IAAA,CAAAzB,IAAA,CAAAA,IAAA;MACA;QACA2B,KAAA,CAAAF,IAAA,CAAAzB,IAAA,CAAA4B,GAAA;MACA;IAEA;EACA;EACAC,OAAA;IACAC,iBAAAnB,QAAA;MACA,IAAAW,IAAA;MACAzB,KAAA,CAAA0B,GAAA,wCAAAZ,QAAA,EAAAa,IAAA,WAAAC,IAAA;QACA,IAAAA,IAAA,CAAAzB,IAAA,CAAA0B,IAAA;UACAJ,IAAA,CAAAd,SAAA,GAAAiB,IAAA,CAAAzB,IAAA,CAAAA,IAAA;QACA;UACA2B,KAAA,CAAAF,IAAA,CAAAzB,IAAA,CAAA4B,GAAA;QACA;MACA;IACA;IACAG,iBAAApB,QAAA;MACA,KAAAR,aAAA;MACA,IAAAmB,IAAA;MACAzB,KAAA,CAAAmC,MAAA,wCAAArB,QAAA,EACAa,IAAA,WAAAC,IAAA;QACA,IAAAA,IAAA,CAAAzB,IAAA,CAAA0B,IAAA;UACAJ,IAAA,CAAAd,SAAA,GAAAiB,IAAA,CAAAzB,IAAA,CAAAA,IAAA;UACAsB,IAAA,CAAAW,MAAA;QACA;UACAN,KAAA,CAAAF,IAAA,CAAAzB,IAAA,CAAA4B,GAAA;QACA;QACA;QACA;QACA;MACA;IACA;;IACAM,MAAA;MACA,KAAAjB,WAAA,CAAAC,QAAA;IACA;IACAiB,WAAAC,KAAA,EAAAC,GAAA;MACA,KAAAnC,iBAAA;MACA,KAAAO,IAAA,CAAAC,MAAA,GAAA2B,GAAA,CAAAC,MAAA;MACA,KAAA7B,IAAA,CAAAI,SAAA,GAAAwB,GAAA,CAAAE,SAAA;MACA,KAAA9B,IAAA,CAAAK,QAAA,GAAAuB,GAAA,CAAAG,QAAA;MACA,KAAA/B,IAAA,CAAAE,QAAA,GAAA0B,GAAA,CAAAnB,QAAA;MACA,KAAAT,IAAA,CAAAG,QAAA,GAAAyB,GAAA,CAAAI,QAAA;MACA,KAAAhC,IAAA,CAAAO,KAAA,GAAAqB,GAAA,CAAArB,KAAA;MACA,KAAAP,IAAA,CAAAM,SAAA,GAAAsB,GAAA,CAAAtB,SAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}